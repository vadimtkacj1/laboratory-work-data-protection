# Лабораторна робота №7: Комплексна система захисту

## Опис

Ця лабораторна робота демонструє комплексну систему захисту, яка поєднує два методи з попередніх лабораторних робіт: шифрування AES (lab05) та LSB стеганографію (lab03). Система включає аналітичний модуль для оцінки ефективності та автоматичне тестування цілісності.

## Функціональність

### Реалізовані функції

1. **Двоетапний захист файлів**
   - **Етап 1**: Шифрування файлу алгоритмом AES-256-CBC з ключем на основі персональних даних
   - **Етап 2**: Приховування зашифрованого файлу в зображенні через LSB стеганографію

2. **Повне відновлення файлів**
   - **Етап 1**: Витягування зашифрованого файлу зі зображення
   - **Етап 2**: Розшифрування файлу за допомогою ключа

3. **Аналітичний модуль**
   - Збір метрик часу виконання кожного етапу
   - Статистика розмірів файлів до/після кожного кроку
   - Графіки продуктивності
   - Звіти з рекомендаціями

4. **Тестування цілісності**
   - Автоматична перевірка повного циклу: захист → відновлення
   - Порівняння хешів оригінального та відновленого файлів
   - Візуальна індикація результатів

## Структура проекту

```
lab07/
├── app.py                  # Flask додаток з API endpoints
├── protection_system.py     # Модуль захисту (шифрування + стеганографія)
├── analytics.py            # Аналітичний модуль
├── templates/
│   └── index.html          # Веб-інтерфейс
├── static/
│   ├── style.css           # Стилізація
│   └── script.js           # JavaScript з графіками
├── uploads/                # Завантажені файли
├── processed/              # Оброблені файли
├── requirements.txt        # Залежності Python
├── analytics.json          # Збережені метрики
└── README.md               # Документація
```

## Як використовувати

### Вимоги

- Python 3.7+
- Flask
- Pillow (для роботи з зображеннями)
- cryptography (для AES шифрування)

### Встановлення

1. Встановіть залежності:
```bash
pip install -r requirements.txt
```

2. Запустіть додаток:
```bash
python app.py
```

3. Відкрийте браузер і перейдіть на:
```
http://localhost:5001
```

## Порядок виконання

### Крок 1: Захист файлу

1. Заповніть персональні дані (ім'я, рік)
2. Виберіть файл для захисту
3. Виберіть зображення-контейнер (PNG рекомендовано)
4. Натисніть "Захистити файл"
5. Система автоматично:
   - Зашифрує файл AES-256
   - Приховає зашифрований файл в зображенні
   - Збереже метрики обробки

### Крок 2: Відновлення файлу

1. Заповніть ті самі персональні дані
2. Виберіть захищене зображення
3. Натисніть "Відновити файл"
4. Система автоматично:
   - Витягне зашифрований файл зі зображення
   - Розшифрує файл
   - Збереже метрики відновлення

### Крок 3: Тестування цілісності

1. Виберіть тестовий файл та зображення
2. Натисніть "Тестувати цілісність"
3. Система автоматично виконає повний цикл та перевірить цілісність

### Крок 4: Аналітика

1. Натисніть "Оновити статистику"
2. Перегляньте:
   - Статистику операцій
   - Середній час виконання
   - Графіки продуктивності
   - Рекомендації

## Принципи роботи

### Етап 1: Шифрування AES-256-CBC

1. **Генерація ключа**:
   ```
   key_string = ім'я + рік
   key = SHA-256(key_string)
   ```

2. **Шифрування**:
   - Генерація випадкового IV (16 байт)
   - Додавання padding (PKCS7)
   - Шифрування AES-256-CBC
   - Збереження: IV + зашифровані дані

### Етап 2: LSB Стеганографія

1. **Підготовка даних**:
   - Розмір файлу кодується в 32 біти
   - Файл конвертується в біти
   - Формується послідовність: розмір + дані

2. **Приховування**:
   - Заміна молодших бітів пікселів RGB
   - Кожен піксель може зберігати 3 біти
   - Збереження модифікованого зображення

### Відновлення

1. **Витягування**:
   - Читання молодших бітів пікселів
   - Витягування розміру файлу (перші 32 біти)
   - Витягування даних файлу

2. **Розшифрування**:
   - Витягування IV (перші 16 байт)
   - Розшифрування AES-256-CBC
   - Видалення padding
   - Збереження оригінального файлу

## Аналітичний модуль

### Збирає метрики

1. **Час виконання**:
   - Час шифрування
   - Час стеганографії
   - Час розшифрування
   - Час витягування
   - Загальний час

2. **Розміри файлів**:
   - Розмір оригінального файлу
   - Розмір зашифрованого файлу
   - Розмір оригінального зображення
   - Розмір захищеного зображення
   - Розмір відновленого файлу

3. **Статистика**:
   - Кількість операцій
   - Середні значення
   - Графіки продуктивності

### Графіки

- Графік часу виконання операцій
- Графік розмірів файлів
- Динаміка змін

## Технічні деталі

### Використані технології

- **Python 3.7+** - мова програмування
- **Flask** - веб-фреймворк
- **cryptography** - бібліотека для AES шифрування
- **Pillow (PIL)** - робота з зображеннями
- **Chart.js** - графіки в браузері

### Особливості реалізації

- Двоетапний захист з автоматичним послідовним застосуванням
- Повне відновлення оригінального файлу
- Автоматичне збереження метрик
- Візуалізація процесу обробки
- Тестування цілісності з перевіркою хешів

## Демонстрація необхідності обох етапів

### Сценарій 1: Тільки знання про стеганографію

- Можна витягти зашифрований файл зі зображення
- Але без ключа неможливо розшифрувати
- Результат: дані залишаються захищеними

### Сценарій 2: Тільки знання ключа

- Можна згенерувати ключ з персональних даних
- Але без знання про стеганографію неможливо витягти файл
- Результат: дані залишаються прихованими

### Висновок

Обидва етапи необхідні для доступу до даних:
- Без шифрування: дані можна витягти, але вони будуть зашифровані
- Без стеганографії: дані можна розшифрувати, але їх не видно в зображенні

## Приклади використання

### Приклад 1: Захист текстового файлу

1. Створіть текстовий файл `secret.txt` з важливою інформацією
2. Виберіть зображення (мінімум 1000×1000 пікселів для файлів до 375 KB)
3. Захистіть файл
4. Отримайте захищене зображення
5. Відновіть файл для перевірки

### Приклад 2: Тестування цілісності

1. Виберіть будь-який файл
2. Запустіть тест цілісності
3. Перевірте, що хеші співпадають
4. Перегляньте метрики обробки

### Приклад 3: Аналіз продуктивності

1. Виконайте кілька операцій захисту/відновлення
2. Перегляньте статистику
3. Проаналізуйте графіки
4. Оцініть ефективність системи

## Обмеження

### Розмір файлів

Максимальний розмір файлу залежить від розміру зображення:
```
Місткість (біт) = ширина × висота × 3
Максимальний розмір файлу = місткість / 8
```

**Приклади:**
- 500×500 пікселів = 937.5 KB
- 1000×1000 пікселів = 3.75 MB
- 2000×2000 пікселів = 15 MB

### Формати зображень

- **PNG** (рекомендовано) - без втрат
- **BMP** - без втрат
- **TIFF** - без втрат
- **JPEG** - не рекомендовано (стиснення може зіпсувати дані)

## Висновки

### Що було досягнуто

1. ✅ Реалізовано двоетапний захист (AES + LSB)
2. ✅ Автоматичне послідовне застосування обох методів
3. ✅ Функція повного відновлення оригінального файлу
4. ✅ Аналітичний модуль з метриками
5. ✅ Автоматичне тестування цілісності
6. ✅ Графічний інтерфейс з візуалізацією

### Ключові висновки

- Комбінація методів забезпечує подвійний захист
- Обидва етапи необхідні для доступу до даних
- Система зберігає цілісність даних після повного циклу
- Аналітика допомагає оцінити ефективність

## Автор

Лабораторна робота виконана в рамках курсу "Кібербезпека"

## Ліцензія

Навчальний проект

