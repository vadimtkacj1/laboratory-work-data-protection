# Лабораторна робота №5: Захищена електронна пошта

## Опис

Ця лабораторна робота демонструє принципи захисту електронної кореспонденції через шифрування повідомлень. Реалізовано систему симетричного шифрування для безпечного обміну електронними листами.

## Функціональність

### Реалізовані функції

1. **Генерація ключа шифрування**
   - Генерація ключа на основі персональних даних (email + ім'я + рік)
   - Використання SHA-256 для створення криптографічно стійкого ключа
   - Експорт ключа для збереження

2. **Шифрування повідомлень**
   - Симетричне шифрування за допомогою AES-256-CBC
   - Кодування в Base64 для безпечної передачі
   - Експорт зашифрованих повідомлень

3. **Розшифрування повідомлень**
   - Розшифрування отриманих зашифрованих повідомлень
   - Валідація ключа та даних
   - Відображення оригінального тексту

4. **Демонстрація обміну**
   - Симуляція безпечного обміну між двома користувачами
   - Покрокова демонстрація процесу шифрування/розшифрування

## Структура проекту

```
lab05/
├── index.html          # Головний HTML файл з інтерфейсом
├── style.css           # Стилізація інтерфейсу
├── script.js           # JavaScript логіка шифрування
└── README.md           # Документація
```

## Як використовувати

### Вимоги

- Сучасний веб-браузер з підтримкою:
  - Web Crypto API
  - ES6+ JavaScript
  - CSS3

### Запуск

1. Відкрийте файл `index.html` у веб-браузері
2. Заповніть персональні дані:
   - Електронна адреса
   - Ім'я та прізвище (без пробілів)
   - Рік народження
3. Натисніть "Згенерувати ключ"
4. Введіть текст повідомлення та зашифруйте його
5. Використайте розшифрування для отриманих повідомлень

## Порядок виконання практичної частини

**Використання веб-інтерфейсу:**
- Згенеруйте ключ на основі своїх даних
- Зашифруйте повідомлення
- Обміняйтеся зашифрованим текстом та ключем з партнером
- Розшифруйте отримане повідомлення

**Що залишається видимим:**
- Адреса відправника
- Адреса отримувача
- Тема листа (якщо не зашифрована окремо)
- Дата та час відправки
- Розмір повідомлення

**Що захищено:**
- Тіло повідомлення
- Вкладення (якщо зашифровані)

## Принципи роботи

### Алгоритм генерації ключа

1. **Формування рядка**:
   ```
   key_string = email + ім'я + рік
   Приклад: "ivan.petrenko@gmail.com" + "IvanPetrenko" + "1995"
   ```

2. **Створення хешу**:
   ```
   key_bytes = SHA-256(key_string)
   ```

3. **Результат**:
   - 32 байти (256 біт) ключа
   - Представлення в hex форматі для зручності

### Алгоритм шифрування

1. **Підготовка даних**:
   - Текст конвертується в байти (UTF-8)
   - Генерується випадковий IV (Initialization Vector) - 16 байт

2. **Шифрування AES-CBC**:
   - Використовується AES-256-CBC (Advanced Encryption Standard)
   - Режим CBC (Cipher Block Chaining) забезпечує безпеку
   - IV додається для унікальності кожного шифрування

3. **Кодування**:
   - Зашифровані дані + IV об'єднуються
   - Конвертуються в Base64 для безпечної передачі через текст

**Формат зашифрованих даних:**
```
[IV (16 байт)] + [Зашифровані дані] → Base64
```

### Алгоритм розшифрування

1. **Декодування Base64**:
   - Base64 рядок конвертується назад в байти

2. **Витягування IV та даних**:
   - Перші 16 байт = IV
   - Решта = зашифровані дані

3. **Розшифрування AES-CBC**:
   - Використовується той самий ключ
   - IV використовується для розшифрування

4. **Конвертація в текст**:
   - Байти конвертуються назад в текст (UTF-8)

## Технічні деталі

### Використані технології

- **HTML5** - структура інтерфейсу
- **CSS3** - стилізація з градієнтами та анімаціями
- **JavaScript (ES6+)** - логіка системи
- **Web Crypto API** - для AES шифрування та SHA-256 хешування
- **Base64** - для кодування зашифрованих даних

### Особливості реалізації

- Використання Web Crypto API для безпечного шифрування
- AES-256-CBC для симетричного шифрування
- SHA-256 для генерації ключів
- Base64 для безпечної передачі через текст
- Випадковий IV для кожного шифрування
- Автоматичне заповнення полів для зручності

### Вимоги до системи

- Сучасний веб-браузер з підтримкою Web Crypto API:
  - Google Chrome 37+
  - Mozilla Firefox 34+
  - Microsoft Edge 79+
  - Safari 11+
  - Opera 24+

## Безпека та обмеження

### Обмеження поточної реалізації

⚠️ **Це спрощена демонстраційна система!**

1. **Симетричне шифрування**:
   - Обидві сторони мають знати ключ
   - Потрібен безпечний канал для обміну ключем

2. **Генерація ключа**:
   - Ключ генерується з персональних даних
   - Якщо дані відомі, ключ можна відтворити

3. **Відсутність аутентифікації**:
   - Немає перевірки автентичності відправника
   - Немає захисту від підробки

### Реальні системи

У реальних системах використовуються:
- **Асиметричне шифрування** (RSA, ECC) для обміну ключами
- **PGP/GPG** для повноцінного захисту email
- **S/MIME** для корпоративного використання
- **Цифрові підписи** для аутентифікації
- **Сертифікати** для перевірки ідентичності

### Рекомендації

1. **Для реального використання**:
   - Використовуйте PGP/GPG для email
   - Використовуйте сильні випадкові ключі
   - Захищайте приватні ключі

2. **Для навчальних цілей**:
   - Розумійте принципи шифрування
   - Експериментуйте з різними алгоритмами
   - Аналізуйте обмеження методів

## Аналіз метаданих

### Що залишається видимим

Навіть при зашифрованих повідомленнях видимі:

1. **Заголовки email**:
   - From (відправник)
   - To (отримувач)
   - Subject (тема) - якщо не зашифрована
   - Date (дата)
   - Message-ID

2. **Метадані**:
   - IP-адреса відправника
   - Час відправки
   - Розмір повідомлення
   - Маршрут доставки

3. **Технічна інформація**:
   - Версія протоколу
   - Використані сервери
   - Географічне розташування

### Захист метаданих

Для повного захисту потрібні:
- **Tor** або **VPN** для приховування IP
- **Mix networks** для анонімної доставки
- **Onion routing** для приховування маршруту
- **Metadata encryption** для захисту заголовків

## Діагностика проблем

### Помилка при генерації ключа

- Перевірте, що всі поля заповнені
- Переконайтеся, що формат даних правильний

### Помилка при шифруванні

- Переконайтеся, що ключ згенеровано
- Перевірте, що повідомлення не порожнє

### Помилка при розшифруванні

- Перевірте правильність ключа (64 hex-символи)
- Переконайтеся, що зашифроване повідомлення не пошкоджене
- Перевірте, що використовується правильний ключ

### Повідомлення не розшифровується

- Ключ має бути ідентичним для шифрування та розшифрування
- Перевірте, що персональні дані співпадають
- Переконайтеся, що зашифроване повідомлення скопійовано повністю

## Висновки

### Що було досягнуто

1. ✅ Реалізовано симетричне шифрування AES-256-CBC
2. ✅ Реалізовано генерацію ключів на основі персональних даних
3. ✅ Продемонстровано процес безпечного обміну повідомленнями
4. ✅ Створено зручний веб-інтерфейс

### Ключові висновки

- Симетричне шифрування ефективне, але потребує безпечного обміну ключами
- AES-256 забезпечує високий рівень безпеки
- Метадані залишаються видимими навіть при зашифрованих повідомленнях
- Для реального використання потрібні складніші протоколи (PGP, S/MIME)

## Автор

Лабораторна робота виконана в рамках курсу "Кібербезпека"

## Ліцензія

Навчальний проект

